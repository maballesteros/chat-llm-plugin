/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ChatPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  apiKey: "",
  model: "gpt-4o"
};
var GPTService = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async fetchResponse(messages) {
    var _a, _b, _c;
    const apiKey = this.plugin.settings.apiKey;
    if (!apiKey) {
      new import_obsidian.Notice("Configura tu API Key en los ajustes del plugin.");
      return "Error: No API Key";
    }
    const payload = {
      model: this.plugin.settings.model,
      messages
    };
    console.log("GPTService: enviando a OpenAI payload:", payload);
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${apiKey}`
      },
      body: JSON.stringify(payload)
    });
    const data = await response.json();
    return ((_c = (_b = (_a = data.choices) == null ? void 0 : _a[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content) || "Error en la respuesta de OpenAI";
  }
};
var ChatPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.gptService = new GPTService(this);
    this.registerView("chat-panel", (leaf) => new ChatView(leaf, this));
    this.addRibbonIcon("message-square", "Open Chat", () => this.activateChatView());
    console.log("Agregando bot\xF3n de nota diaria!");
    this.addRibbonIcon("document", "Crear Nota Diaria", () => this.createDailyNote());
    this.addSettingTab(new ChatSettingTab(this.app, this));
    this.addCommand({
      id: "autocomplete-with-ai",
      name: "Autocompletar con IA",
      callback: () => this.autocompleteWithAI()
    });
  }
  /**
   * Obtiene el editor Markdown activo.
   */
  getActiveMarkdownEditor() {
    const markdownLeaf = this.app.workspace.getLeavesOfType("markdown").find((leaf) => leaf.containerEl.offsetParent !== null && leaf.view instanceof import_obsidian.MarkdownView);
    if (markdownLeaf) {
      return markdownLeaf.view.editor;
    }
    return null;
  }
  /**
   * Comando de autocompletar: obtiene el contenido actual del editor,
   * consulta a GPT y agrega la respuesta.
   */
  async autocompleteWithAI() {
    const editor = this.getActiveMarkdownEditor();
    if (!editor) {
      new import_obsidian.Notice("No se encontr\xF3 un editor activo.");
      return;
    }
    const cursor = editor.getCursor();
    const userText = editor.getRange({ line: 0, ch: 0 }, cursor).trim();
    if (!userText) {
      new import_obsidian.Notice("El editor est\xE1 vac\xEDo. Escribe algo antes de autocompletar.");
      return;
    }
    const messages = [
      { role: "system", content: "Eres un asistente IA que completa los textos que te env\xEDan los usuarios, respetando el estilo y tono previo. No dices nada m\xE1s, simplemente contin\xFAas el texto que te pasan." },
      { role: "user", content: userText }
    ];
    console.log("AutocompleteWithAI payload:", messages);
    const response = await this.gptService.fetchResponse(messages);
    if (!response || response.startsWith("Error")) {
      new import_obsidian.Notice("Hubo un problema obteniendo la respuesta de la IA.");
      return;
    }
    editor.replaceRange(`
${response}`, cursor);
    new import_obsidian.Notice("Texto autocompletado con IA.");
  }
  async activateChatView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType("chat-panel")[0];
    if (!leaf) {
      leaf = workspace.getRightLeaf(false);
      await leaf.setViewState({ type: "chat-panel", active: true });
    }
    workspace.revealLeaf(leaf);
  }
  async createDailyNote() {
    const now = new Date();
    const year = now.getFullYear().toString();
    const month = String(now.getMonth() + 1).padStart(2, "0");
    const day = String(now.getDate()).padStart(2, "0");
    const yearFolder = year;
    const monthFolder = `${year}-${month}`;
    const dayFolder = `${year}-${month}-${day}`;
    const notePath = `${yearFolder}/${monthFolder}/${dayFolder}/${dayFolder}.md`;
    let file = this.app.vault.getAbstractFileByPath(notePath);
    if (!file) {
      try {
        await this.app.vault.adapter.mkdir(yearFolder);
      } catch (e) {
      }
      try {
        await this.app.vault.adapter.mkdir(`${yearFolder}/${monthFolder}`);
      } catch (e) {
      }
      try {
        await this.app.vault.adapter.mkdir(`${yearFolder}/${monthFolder}/${dayFolder}`);
      } catch (e) {
      }
      file = await this.app.vault.create(notePath, `# ${dayFolder}

`);
    }
    const leaf = this.app.workspace.getLeaf(true);
    await leaf.openFile(file);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var _ChatView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.conversation = [];
  }
  getViewType() {
    return "chat-panel";
  }
  getDisplayText() {
    return "Chat with GPT";
  }
  async onOpen() {
    this.render();
  }
  async onClose() {
  }
  async render() {
    this.containerEl.empty();
    const styleEl = this.containerEl.createEl("style");
    styleEl.setText(`
			.chat-messages {
				padding: 10px;
				overflow-y: auto;
				height: calc(100% - 100px);
				font-size: 14px;
			}
			.user-message-container {
				display: flex;
				justify-content: flex-end;
			}	
			.user-message, .bot-message {
				margin: 10px 0;
				padding: 10px;
				border-radius: 8px;
				line-height: 1.4;
				border: var(--input-border-width) solid var(--background-modifier-border);
			}
			.user-message {
				background-color: #d8fdd2;
				display: inline-block;
				max-width: 80%;
				word-wrap: break-word;
			}
			.bot-message {
				text-align: left;
				position: relative;
				padding: 0px 10px;
				background: var(--background-modifier-form-field);
			}
			.bot-message .transfer-button {
				position: absolute;
				top: 5px;
				right: 5px;
				background: transparent;
				border: none;
				cursor: pointer;
				opacity: 0;
				transition: opacity 0.3s;
				padding: 4px;
			}
			.bot-message:hover .transfer-button {
				opacity: 1;
			}
			.bot-message .transfer-button svg {
				width: 16px;
				height: 16px;
				fill: currentColor;
			}
			.chat-input-container {
				display: flex;
				align-items: center;
				padding: 10px;
				gap: 10px;
			}
			.chat-input {
				flex-grow: 1;
				padding: 8px;
				font-size: 13px;
				resize: none;
			}
			.chat-send-button {
				background: none;
				border: none;
				cursor: pointer;
				padding: 8px;
			}
			.chat-send-button svg {
				width: 24px;
				height: 24px;
				fill: currentColor;
			}
			.spinner {
				border: 4px solid rgba(0, 0, 0, 0.1);
				border-left-color: #767676;
				border-radius: 50%;
				width: 24px;
				height: 24px;
				animation: spin 1s linear infinite;
				margin: 0 auto;
			}
			@keyframes spin {
				to { transform: rotate(360deg); }
			}			
		`);
    this.messages = this.containerEl.createEl("div", { cls: "chat-messages" });
    const inputContainer = this.containerEl.createEl("div", { cls: "chat-input-container" });
    const input = inputContainer.createEl("textarea", {
      cls: "chat-input",
      attr: { placeholder: "Escribe un mensaje..." }
    });
    const sendButton = inputContainer.createEl("button", { cls: "chat-send-button", attr: { title: "Enviar" } });
    sendButton.innerHTML = `
			<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
			  <path d="M2 21l21-9L2 3v7l15 2-15 2z"/>
			</svg>
		`;
    sendButton.addEventListener("click", () => this.sendMessage(input.value));
    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        this.sendMessage(input.value);
      }
    });
  }
  async sendMessage(userMessage) {
    if (!userMessage.trim())
      return;
    const inputEl = this.containerEl.querySelector(".chat-input");
    inputEl.value = "";
    const userMessageWrapper = this.messages.createEl("div", { cls: "user-message-container" });
    userMessageWrapper.createEl("div", { cls: "user-message", text: userMessage });
    const spinnerContainer = this.messages.createEl("div", { cls: "bot-message" });
    spinnerContainer.createEl("div", { cls: "spinner" });
    const editor = this.plugin.getActiveMarkdownEditor();
    let contextText = "";
    if (editor) {
      contextText = editor.getValue();
      console.log("Texto del contexto:", contextText);
    } else {
      console.log("No se encontr\xF3 ninguna vista Markdown activa.");
    }
    const trimmed = userMessage.trim();
    const shouldReset = trimmed === "/new" || this.conversation.length === 0;
    if (shouldReset) {
      this.messages.empty();
      let systemContent = _ChatView.systemPrompt;
      if (contextText.trim()) {
        systemContent += `

Contexto de la nota:
${contextText}`;
      }
      this.conversation = [{ role: "system", content: systemContent }];
      if (trimmed === "/new") {
        new import_obsidian.Notice("Started new conversation");
        return;
      }
    }
    this.conversation.push({ role: "user", content: userMessage });
    console.log("****ChatView.sendMessage: payload:", this.conversation);
    const response = await this.plugin.gptService.fetchResponse(this.conversation);
    this.conversation.push({ role: "assistant", content: response });
    spinnerContainer.empty();
    const markdownContainer = spinnerContainer.createEl("div");
    await import_obsidian.MarkdownRenderer.renderMarkdown(response, markdownContainer, "", this);
    const transferButton = spinnerContainer.createEl("button", { cls: "transfer-button" });
    transferButton.innerHTML = `
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" 
				stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
				<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
				<path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
			</svg>
		`;
    transferButton.addEventListener("click", () => this.insertInEditor(response));
  }
  insertInEditor(text) {
    const editor = this.plugin.getActiveMarkdownEditor();
    if (editor) {
      editor.replaceRange(text, editor.getCursor());
      new import_obsidian.Notice("Mensaje insertado en el editor.");
    } else {
      new import_obsidian.Notice("No se encontr\xF3 un editor activo.");
    }
  }
};
var ChatView = _ChatView;
// Initial system prompt for the conversation
ChatView.systemPrompt = "Eres un asistente experto en todas las \xE1reas de conocimiento. Para las f\xF3rmulas matem\xE1ticas siempre empleas la notaci\xF3n de KaTex con delimitadores $$ para displayed formulas y $ para inlines. Generas markdown compatible 100% con Obsidian: tareas, callouts, diagramas mermaid, markmap, etc.";
var ChatSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc("Introduce tu API Key de OpenAI").addText((text) => text.setPlaceholder("sk-...").setValue(this.plugin.settings.apiKey).onChange(async (value) => {
      this.plugin.settings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Modelo").setDesc("Elige el modelo de OpenAI").addDropdown((dropdown) => dropdown.addOptions({ "o3": "o3", "o4-mini": "o4-mini", "gpt-4.1": "GPT-4.1", "chatgpt-4o-latest": "ChatGPT" }).setValue(this.plugin.settings.model).onChange(async (value) => {
      this.plugin.settings.model = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTWFya2Rvd25SZW5kZXJlciwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFdvcmtzcGFjZUxlYWYsIEl0ZW1WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBDb25maWd1cmFjaVx1MDBGM24gZGVsIHBsdWdpblxuaW50ZXJmYWNlIENoYXRQbHVnaW5TZXR0aW5ncyB7XG5cdGFwaUtleTogc3RyaW5nO1xuXHRtb2RlbDogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDaGF0UGx1Z2luU2V0dGluZ3MgPSB7XG5cdGFwaUtleTogJycsXG5cdG1vZGVsOiAnZ3B0LTRvJ1xufTtcblxuLyoqXG4gKiBTZXJ2aWNpbyBwYXJhIGludGVyYWN0dWFyIGNvbiBsYSBBUEkgZGUgT3BlbkFJLlxuICovXG5jbGFzcyBHUFRTZXJ2aWNlIHtcblx0cGx1Z2luOiBDaGF0UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogQ2hhdFBsdWdpbikge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0YXN5bmMgZmV0Y2hSZXNwb25zZShtZXNzYWdlczogYW55W10pOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IGFwaUtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleTtcblx0XHRpZiAoIWFwaUtleSkge1xuXHRcdFx0bmV3IE5vdGljZSgnQ29uZmlndXJhIHR1IEFQSSBLZXkgZW4gbG9zIGFqdXN0ZXMgZGVsIHBsdWdpbi4nKTtcblx0XHRcdHJldHVybiAnRXJyb3I6IE5vIEFQSSBLZXknO1xuXHRcdH1cblxuXHRcdC8vIFByZXBhcmFyIHkgcmVnaXN0cmFyIGVsIHBheWxvYWQgYW50ZXMgZGUgZW52aWFybG9cblx0XHRjb25zdCBwYXlsb2FkID0ge1xuXHRcdFx0bW9kZWw6IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsLFxuXHRcdFx0bWVzc2FnZXM6IG1lc3NhZ2VzXG5cdFx0fTtcblx0XHRjb25zb2xlLmxvZyhcIkdQVFNlcnZpY2U6IGVudmlhbmRvIGEgT3BlbkFJIHBheWxvYWQ6XCIsIHBheWxvYWQpO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0XHQnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthcGlLZXl9YFxuXHRcdFx0fSxcblx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXG5cdFx0fSk7XG5cblx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXHRcdHJldHVybiBkYXRhLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCB8fCAnRXJyb3IgZW4gbGEgcmVzcHVlc3RhIGRlIE9wZW5BSSc7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBDaGF0UGx1Z2luU2V0dGluZ3M7XG5cdGdwdFNlcnZpY2U6IEdQVFNlcnZpY2U7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBJbmljaWFsaXphbW9zIGVsIHNlcnZpY2lvIGRlIEdQVFxuXHRcdHRoaXMuZ3B0U2VydmljZSA9IG5ldyBHUFRTZXJ2aWNlKHRoaXMpO1xuXG5cdFx0Ly8gQWdyZWdhciBlbCBwYW5lbCBsYXRlcmFsIGRlIGNoYXRcblx0XHR0aGlzLnJlZ2lzdGVyVmlldygnY2hhdC1wYW5lbCcsIChsZWFmKSA9PiBuZXcgQ2hhdFZpZXcobGVhZiwgdGhpcykpO1xuXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKCdtZXNzYWdlLXNxdWFyZScsICdPcGVuIENoYXQnLCAoKSA9PiB0aGlzLmFjdGl2YXRlQ2hhdFZpZXcoKSk7XG5cblx0XHQvLyBOdWV2byByaWJib24gYnV0dG9uIHBhcmEgY3JlYXIgeSBhYnJpciBsYSBub3RhIGRpYXJpYVxuXHRcdGNvbnNvbGUubG9nKFwiQWdyZWdhbmRvIGJvdFx1MDBGM24gZGUgbm90YSBkaWFyaWEhXCIpO1xuXHRcdHRoaXMuYWRkUmliYm9uSWNvbignZG9jdW1lbnQnLCAnQ3JlYXIgTm90YSBEaWFyaWEnLCAoKSA9PiB0aGlzLmNyZWF0ZURhaWx5Tm90ZSgpKTtcblxuXHRcdC8vIEFncmVnYXIgcGVzdGFcdTAwRjFhIGRlIGNvbmZpZ3VyYWNpXHUwMEYzblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQ2hhdFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIE51ZXZvIGNvbWFuZG8gcGFyYSBhdXRvY29tcGxldGFyIGNvbiBJQSBzaW4gZGVwZW5kZXIgZGUgbGEgdmlzdGEgZGUgY2hhdFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2F1dG9jb21wbGV0ZS13aXRoLWFpJyxcblx0XHRcdG5hbWU6ICdBdXRvY29tcGxldGFyIGNvbiBJQScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5hdXRvY29tcGxldGVXaXRoQUkoKVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIE9idGllbmUgZWwgZWRpdG9yIE1hcmtkb3duIGFjdGl2by5cblx0ICovXG5cdGdldEFjdGl2ZU1hcmtkb3duRWRpdG9yKCk6IEVkaXRvciB8IG51bGwge1xuXHRcdGNvbnN0IG1hcmtkb3duTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZVxuXHRcdFx0LmdldExlYXZlc09mVHlwZShcIm1hcmtkb3duXCIpXG5cdFx0XHQuZmluZChsZWFmID0+IGxlYWYuY29udGFpbmVyRWwub2Zmc2V0UGFyZW50ICE9PSBudWxsICYmIGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyk7XG5cdFx0aWYgKG1hcmtkb3duTGVhZikge1xuXHRcdFx0cmV0dXJuIChtYXJrZG93bkxlYWYudmlldyBhcyBNYXJrZG93blZpZXcpLmVkaXRvcjtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvKipcblx0ICogQ29tYW5kbyBkZSBhdXRvY29tcGxldGFyOiBvYnRpZW5lIGVsIGNvbnRlbmlkbyBhY3R1YWwgZGVsIGVkaXRvcixcblx0ICogY29uc3VsdGEgYSBHUFQgeSBhZ3JlZ2EgbGEgcmVzcHVlc3RhLlxuXHQgKi9cblx0YXN5bmMgYXV0b2NvbXBsZXRlV2l0aEFJKCkge1xuXHRcdGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0QWN0aXZlTWFya2Rvd25FZGl0b3IoKTtcblx0XHRpZiAoIWVkaXRvcikge1xuXHRcdFx0bmV3IE5vdGljZShcIk5vIHNlIGVuY29udHJcdTAwRjMgdW4gZWRpdG9yIGFjdGl2by5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQW50aWd1bzogZW52aWFiYSB0b2RvIGVsIGNvbnRlbmlkbyBkZSBsYSBub3RhOyBzaSBubyBmdW5jaW9uYSwgcmVzdGF1cmEgbGEgbFx1MDBFRG5lYSBzaWd1aWVudGUuXG5cdFx0Ly8gY29uc3QgdXNlclRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKS50cmltKCk7XG5cdFx0Ly8gT2J0ZW5lciBzb2xvIGVsIHRleHRvIGhhc3RhIGxhIHBvc2ljaVx1MDBGM24gYWN0dWFsIGRlbCBjdXJzb3Jcblx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cdFx0Y29uc3QgdXNlclRleHQgPSBlZGl0b3IuZ2V0UmFuZ2UoeyBsaW5lOiAwLCBjaDogMCB9LCBjdXJzb3IpLnRyaW0oKTtcblx0XHRpZiAoIXVzZXJUZXh0KSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiRWwgZWRpdG9yIGVzdFx1MDBFMSB2YWNcdTAwRURvLiBFc2NyaWJlIGFsZ28gYW50ZXMgZGUgYXV0b2NvbXBsZXRhci5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbWVzc2FnZXMgPSBbXG5cdFx0XHR7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBcIkVyZXMgdW4gYXNpc3RlbnRlIElBIHF1ZSBjb21wbGV0YSBsb3MgdGV4dG9zIHF1ZSB0ZSBlbnZcdTAwRURhbiBsb3MgdXN1YXJpb3MsIHJlc3BldGFuZG8gZWwgZXN0aWxvIHkgdG9ubyBwcmV2aW8uIE5vIGRpY2VzIG5hZGEgbVx1MDBFMXMsIHNpbXBsZW1lbnRlIGNvbnRpblx1MDBGQWFzIGVsIHRleHRvIHF1ZSB0ZSBwYXNhbi5cIiB9LFxuXHRcdFx0eyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHVzZXJUZXh0IH1cblx0XHRdO1xuXG5cdFx0Ly8gRGVwdXJhciBwYXlsb2FkOiBtb3N0cmFyIGVuIGNvbnNvbGEgbG8gcXVlIHNlIGVudlx1MDBFRGEgYSBsYSBJQVxuXHRcdGNvbnNvbGUubG9nKFwiQXV0b2NvbXBsZXRlV2l0aEFJIHBheWxvYWQ6XCIsIG1lc3NhZ2VzKTtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ3B0U2VydmljZS5mZXRjaFJlc3BvbnNlKG1lc3NhZ2VzKTtcblx0XHRpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXJ0c1dpdGgoXCJFcnJvclwiKSkge1xuXHRcdFx0bmV3IE5vdGljZShcIkh1Ym8gdW4gcHJvYmxlbWEgb2J0ZW5pZW5kbyBsYSByZXNwdWVzdGEgZGUgbGEgSUEuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEluc2VydGFyIGxhIHJlc3B1ZXN0YSBlbiBsYSBwb3NpY2lcdTAwRjNuIG9yaWdpbmFsIGRlbCBjdXJzb3Jcblx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKGBcXG4ke3Jlc3BvbnNlfWAsIGN1cnNvcik7XG5cdFx0bmV3IE5vdGljZShcIlRleHRvIGF1dG9jb21wbGV0YWRvIGNvbiBJQS5cIik7XG5cdH1cblxuXHRhc3luYyBhY3RpdmF0ZUNoYXRWaWV3KCkge1xuXHRcdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcblx0XHRsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2NoYXQtcGFuZWwnKVswXTtcblx0XHRpZiAoIWxlYWYpIHtcblx0XHRcdGxlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogJ2NoYXQtcGFuZWwnLCBhY3RpdmU6IHRydWUgfSk7XG5cdFx0fVxuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlRGFpbHlOb3RlKCkge1xuXHRcdC8vIE9idGVuZXIgbGEgZmVjaGEgYWN0dWFsXG5cdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRjb25zdCB5ZWFyID0gbm93LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcblx0XHRjb25zdCBtb250aCA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG5cdFx0Y29uc3QgZGF5ID0gU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG5cdCAgXG5cdFx0Ly8gRGVmaW5pciBsYXMgY2FycGV0YXMgeSBsYSBydXRhIGRlbCBhcmNoaXZvXG5cdFx0Y29uc3QgeWVhckZvbGRlciA9IHllYXI7XG5cdFx0Y29uc3QgbW9udGhGb2xkZXIgPSBgJHt5ZWFyfS0ke21vbnRofWA7XG5cdFx0Y29uc3QgZGF5Rm9sZGVyID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcblx0XHRjb25zdCBub3RlUGF0aCA9IGAke3llYXJGb2xkZXJ9LyR7bW9udGhGb2xkZXJ9LyR7ZGF5Rm9sZGVyfS8ke2RheUZvbGRlcn0ubWRgO1xuXHQgIFxuXHRcdC8vIFZlcmlmaWNhciBzaSBsYSBub3RhIHlhIGV4aXN0ZVxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5vdGVQYXRoKTtcblx0XHRpZiAoIWZpbGUpIHtcblx0XHQgIC8vIENyZWFyIGxhIGVzdHJ1Y3R1cmEgZGUgY2FycGV0YXMgbmVjZXNhcmlhLiBTaSBsYSBjYXJwZXRhIHlhIGV4aXN0ZSwgc2UgcHVlZGUgaWdub3JhciBlbCBlcnJvci5cblx0XHQgIHRyeSB7IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoeWVhckZvbGRlcik7IH0gY2F0Y2ggKGUpIHt9XG5cdFx0ICB0cnkgeyBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKGAke3llYXJGb2xkZXJ9LyR7bW9udGhGb2xkZXJ9YCk7IH0gY2F0Y2ggKGUpIHt9XG5cdFx0ICB0cnkgeyBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKGAke3llYXJGb2xkZXJ9LyR7bW9udGhGb2xkZXJ9LyR7ZGF5Rm9sZGVyfWApOyB9IGNhdGNoIChlKSB7fVxuXHQgIFxuXHRcdCAgLy8gQ3JlYXIgbGEgbm90YSBudWV2YSAoYXF1XHUwMEVEIHB1ZWRlcyBkZWZpbmlyIHVuIGNvbnRlbmlkbyBpbmljaWFsIHNpIGxvIGRlc2Vhcylcblx0XHQgIGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobm90ZVBhdGgsIGAjICR7ZGF5Rm9sZGVyfVxcblxcbmApO1xuXHRcdH1cblx0ICBcblx0XHQvLyBBYnJpciBlbCBhcmNoaXZvIGVuIHVuIG51ZXZvIHBhbmVsXG5cdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuXHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG4vKipcbiAqIFZpc3RhIGRlIGNoYXQgcXVlIHV0aWxpemEgZWwgR1BUU2VydmljZSBkZWwgcGx1Z2luIHBhcmEgY29tdW5pY2Fyc2UgY29uIGxhIEFQSS5cbiAqL1xuY2xhc3MgQ2hhdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICBwbHVnaW46IENoYXRQbHVnaW47XG4gICBtZXNzYWdlczogSFRNTEVsZW1lbnQ7XG4gICAvLyBDb252ZXJzYXRpb24gaGlzdG9yeSBpbmNsdWRpbmcgc3lzdGVtLCB1c2VyLCBhbmQgYXNzaXN0YW50IG1lc3NhZ2VzXG4gICBjb252ZXJzYXRpb246IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdO1xuICAgLy8gSW5pdGlhbCBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgY29udmVyc2F0aW9uXG4gICBzdGF0aWMgc3lzdGVtUHJvbXB0OiBzdHJpbmcgPSAnRXJlcyB1biBhc2lzdGVudGUgZXhwZXJ0byBlbiB0b2RhcyBsYXMgXHUwMEUxcmVhcyBkZSBjb25vY2ltaWVudG8uIFBhcmEgbGFzIGZcdTAwRjNybXVsYXMgbWF0ZW1cdTAwRTF0aWNhcyBzaWVtcHJlIGVtcGxlYXMgbGEgbm90YWNpXHUwMEYzbiBkZSBLYVRleCBjb24gZGVsaW1pdGFkb3JlcyAkJCBwYXJhIGRpc3BsYXllZCBmb3JtdWxhcyB5ICQgcGFyYSBpbmxpbmVzLiBHZW5lcmFzIG1hcmtkb3duIGNvbXBhdGlibGUgMTAwJSBjb24gT2JzaWRpYW46IHRhcmVhcywgY2FsbG91dHMsIGRpYWdyYW1hcyBtZXJtYWlkLCBtYXJrbWFwLCBldGMuJztcblxuXHRjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IENoYXRQbHVnaW4pIHtcblx0XHRzdXBlcihsZWFmKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHQvLyBJbml0aWFsaXplIGNvbnZlcnNhdGlvbiBhcyBlbXB0eTsgc3lzdGVtIHByb21wdCB3aWxsIGJlIGFkZGVkIGR5bmFtaWNhbGx5IHdpdGggY29udGV4dFxuXHRcdHRoaXMuY29udmVyc2F0aW9uID0gW107XG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpIHtcblx0XHRyZXR1cm4gJ2NoYXQtcGFuZWwnO1xuXHR9XG5cblx0Z2V0RGlzcGxheVRleHQoKSB7XG5cdFx0cmV0dXJuICdDaGF0IHdpdGggR1BUJztcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHR0aGlzLnJlbmRlcigpO1xuXHR9XG5cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHQvLyBMaW1waWFyIHJlY3Vyc29zIHNpIGVzIG5lY2VzYXJpb1xuXHR9XG5cblx0YXN5bmMgcmVuZGVyKCkge1xuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcblx0ICBcblx0XHQvLyBJbnllY3RhciBlc3RpbG9zIHBhcmEgZWwgY2hhdFxuXHRcdGNvbnN0IHN0eWxlRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzdHlsZScpO1xuXHRcdHN0eWxlRWwuc2V0VGV4dChgXG5cdFx0XHQuY2hhdC1tZXNzYWdlcyB7XG5cdFx0XHRcdHBhZGRpbmc6IDEwcHg7XG5cdFx0XHRcdG92ZXJmbG93LXk6IGF1dG87XG5cdFx0XHRcdGhlaWdodDogY2FsYygxMDAlIC0gMTAwcHgpO1xuXHRcdFx0XHRmb250LXNpemU6IDE0cHg7XG5cdFx0XHR9XG5cdFx0XHQudXNlci1tZXNzYWdlLWNvbnRhaW5lciB7XG5cdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG5cdFx0XHR9XHRcblx0XHRcdC51c2VyLW1lc3NhZ2UsIC5ib3QtbWVzc2FnZSB7XG5cdFx0XHRcdG1hcmdpbjogMTBweCAwO1xuXHRcdFx0XHRwYWRkaW5nOiAxMHB4O1xuXHRcdFx0XHRib3JkZXItcmFkaXVzOiA4cHg7XG5cdFx0XHRcdGxpbmUtaGVpZ2h0OiAxLjQ7XG5cdFx0XHRcdGJvcmRlcjogdmFyKC0taW5wdXQtYm9yZGVyLXdpZHRoKSBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdFx0XHR9XG5cdFx0XHQudXNlci1tZXNzYWdlIHtcblx0XHRcdFx0YmFja2dyb3VuZC1jb2xvcjogI2Q4ZmRkMjtcblx0XHRcdFx0ZGlzcGxheTogaW5saW5lLWJsb2NrO1xuXHRcdFx0XHRtYXgtd2lkdGg6IDgwJTtcblx0XHRcdFx0d29yZC13cmFwOiBicmVhay13b3JkO1xuXHRcdFx0fVxuXHRcdFx0LmJvdC1tZXNzYWdlIHtcblx0XHRcdFx0dGV4dC1hbGlnbjogbGVmdDtcblx0XHRcdFx0cG9zaXRpb246IHJlbGF0aXZlO1xuXHRcdFx0XHRwYWRkaW5nOiAwcHggMTBweDtcblx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1mb3JtLWZpZWxkKTtcblx0XHRcdH1cblx0XHRcdC5ib3QtbWVzc2FnZSAudHJhbnNmZXItYnV0dG9uIHtcblx0XHRcdFx0cG9zaXRpb246IGFic29sdXRlO1xuXHRcdFx0XHR0b3A6IDVweDtcblx0XHRcdFx0cmlnaHQ6IDVweDtcblx0XHRcdFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5cdFx0XHRcdGJvcmRlcjogbm9uZTtcblx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdFx0XHRvcGFjaXR5OiAwO1xuXHRcdFx0XHR0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3M7XG5cdFx0XHRcdHBhZGRpbmc6IDRweDtcblx0XHRcdH1cblx0XHRcdC5ib3QtbWVzc2FnZTpob3ZlciAudHJhbnNmZXItYnV0dG9uIHtcblx0XHRcdFx0b3BhY2l0eTogMTtcblx0XHRcdH1cblx0XHRcdC5ib3QtbWVzc2FnZSAudHJhbnNmZXItYnV0dG9uIHN2ZyB7XG5cdFx0XHRcdHdpZHRoOiAxNnB4O1xuXHRcdFx0XHRoZWlnaHQ6IDE2cHg7XG5cdFx0XHRcdGZpbGw6IGN1cnJlbnRDb2xvcjtcblx0XHRcdH1cblx0XHRcdC5jaGF0LWlucHV0LWNvbnRhaW5lciB7XG5cdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0XHRcdHBhZGRpbmc6IDEwcHg7XG5cdFx0XHRcdGdhcDogMTBweDtcblx0XHRcdH1cblx0XHRcdC5jaGF0LWlucHV0IHtcblx0XHRcdFx0ZmxleC1ncm93OiAxO1xuXHRcdFx0XHRwYWRkaW5nOiA4cHg7XG5cdFx0XHRcdGZvbnQtc2l6ZTogMTNweDtcblx0XHRcdFx0cmVzaXplOiBub25lO1xuXHRcdFx0fVxuXHRcdFx0LmNoYXQtc2VuZC1idXR0b24ge1xuXHRcdFx0XHRiYWNrZ3JvdW5kOiBub25lO1xuXHRcdFx0XHRib3JkZXI6IG5vbmU7XG5cdFx0XHRcdGN1cnNvcjogcG9pbnRlcjtcblx0XHRcdFx0cGFkZGluZzogOHB4O1xuXHRcdFx0fVxuXHRcdFx0LmNoYXQtc2VuZC1idXR0b24gc3ZnIHtcblx0XHRcdFx0d2lkdGg6IDI0cHg7XG5cdFx0XHRcdGhlaWdodDogMjRweDtcblx0XHRcdFx0ZmlsbDogY3VycmVudENvbG9yO1xuXHRcdFx0fVxuXHRcdFx0LnNwaW5uZXIge1xuXHRcdFx0XHRib3JkZXI6IDRweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7XG5cdFx0XHRcdGJvcmRlci1sZWZ0LWNvbG9yOiAjNzY3Njc2O1xuXHRcdFx0XHRib3JkZXItcmFkaXVzOiA1MCU7XG5cdFx0XHRcdHdpZHRoOiAyNHB4O1xuXHRcdFx0XHRoZWlnaHQ6IDI0cHg7XG5cdFx0XHRcdGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG5cdFx0XHRcdG1hcmdpbjogMCBhdXRvO1xuXHRcdFx0fVxuXHRcdFx0QGtleWZyYW1lcyBzcGluIHtcblx0XHRcdFx0dG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG5cdFx0XHR9XHRcdFx0XG5cdFx0YCk7XG5cdCAgXG5cdFx0Ly8gQ29udGVuZWRvciBkZSBtZW5zYWplc1xuXHRcdHRoaXMubWVzc2FnZXMgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NoYXQtbWVzc2FnZXMnIH0pO1xuXHQgIFxuXHRcdC8vIENvbnRlbmVkb3IgcGFyYSBlbCBpbnB1dCB5IGVsIGJvdFx1MDBGM24gZGUgZW52aWFyXG5cdFx0Y29uc3QgaW5wdXRDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NoYXQtaW5wdXQtY29udGFpbmVyJyB9KTtcblx0XHRjb25zdCBpbnB1dCA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcblx0XHQgIGNsczogJ2NoYXQtaW5wdXQnLFxuXHRcdCAgYXR0cjogeyBwbGFjZWhvbGRlcjogJ0VzY3JpYmUgdW4gbWVuc2FqZS4uLicgfVxuXHRcdH0pO1xuXHRcdFxuXHRcdGNvbnN0IHNlbmRCdXR0b24gPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdjaGF0LXNlbmQtYnV0dG9uJywgYXR0cjogeyB0aXRsZTogJ0VudmlhcicgfSB9KTtcblx0XHRzZW5kQnV0dG9uLmlubmVySFRNTCA9IGBcblx0XHRcdDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cblx0XHRcdCAgPHBhdGggZD1cIk0yIDIxbDIxLTlMMiAzdjdsMTUgMi0xNSAyelwiLz5cblx0XHRcdDwvc3ZnPlxuXHRcdGA7XG5cdCAgXG5cdFx0c2VuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoaW5wdXQudmFsdWUpKTtcblx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG5cdFx0ICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMuc2VuZE1lc3NhZ2UoaW5wdXQudmFsdWUpO1xuXHRcdCAgfVxuXHRcdH0pO1xuXHR9XG5cblx0YXN5bmMgc2VuZE1lc3NhZ2UodXNlck1lc3NhZ2U6IHN0cmluZykge1xuXHRcdGlmICghdXNlck1lc3NhZ2UudHJpbSgpKSByZXR1cm47XG5cdFxuXHRcdC8vIExpbXBpYXIgZWwgaW5wdXRcblx0XHRjb25zdCBpbnB1dEVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1pbnB1dCcpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG5cdFx0aW5wdXRFbC52YWx1ZSA9ICcnO1xuXHRcblx0XHQvLyBNb3N0cmFyIG1lbnNhamUgZGVsIHVzdWFyaW9cblx0XHRjb25zdCB1c2VyTWVzc2FnZVdyYXBwZXIgPSB0aGlzLm1lc3NhZ2VzLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3VzZXItbWVzc2FnZS1jb250YWluZXInIH0pO1xuXHRcdHVzZXJNZXNzYWdlV3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd1c2VyLW1lc3NhZ2UnLCB0ZXh0OiB1c2VyTWVzc2FnZSB9KTtcblx0XG5cdFx0Ly8gTW9zdHJhciBzcGlubmVyIG1pZW50cmFzIHNlIGVzcGVyYSBsYSByZXNwdWVzdGFcblx0XHRjb25zdCBzcGlubmVyQ29udGFpbmVyID0gdGhpcy5tZXNzYWdlcy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib3QtbWVzc2FnZScgfSk7XG4gICAgICAgXHRcdHNwaW5uZXJDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3Bpbm5lcicgfSk7XG5cblxuXHRcdC8vIE9idGVuZXIgY29udGV4dG8gZGVzZGUgZWwgZWRpdG9yIGFjdGl2byAob3BjaW9uYWwpXG5cdFx0Y29uc3QgZWRpdG9yID0gdGhpcy5wbHVnaW4uZ2V0QWN0aXZlTWFya2Rvd25FZGl0b3IoKTtcblx0XHRsZXQgY29udGV4dFRleHQgPSAnJztcblx0XHRpZiAoZWRpdG9yKSB7XG5cdFx0XHRjb250ZXh0VGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJUZXh0byBkZWwgY29udGV4dG86XCIsIGNvbnRleHRUZXh0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coXCJObyBzZSBlbmNvbnRyXHUwMEYzIG5pbmd1bmEgdmlzdGEgTWFya2Rvd24gYWN0aXZhLlwiKTtcblx0XHR9XHRcblxuICAgICAgICAvLyBSZXNldCBjb252ZXJzYXRpb24gaWYgaW5pdGlhbCBvciBvbiAvbmV3IGNvbW1hbmQsIGluY2x1ZGluZyBhZGRpbmcgY29udGV4dFxuICAgICAgICBjb25zdCB0cmltbWVkID0gdXNlck1lc3NhZ2UudHJpbSgpO1xuICAgICAgICBjb25zdCBzaG91bGRSZXNldCA9IHRyaW1tZWQgPT09ICcvbmV3JyB8fCB0aGlzLmNvbnZlcnNhdGlvbi5sZW5ndGggPT09IDA7XG4gICAgICAgIGlmIChzaG91bGRSZXNldCkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5lbXB0eSgpO1xuICAgICAgICAgICAgbGV0IHN5c3RlbUNvbnRlbnQgPSBDaGF0Vmlldy5zeXN0ZW1Qcm9tcHQ7XG4gICAgICAgICAgICBpZiAoY29udGV4dFRleHQudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgc3lzdGVtQ29udGVudCArPSBgXFxuXFxuQ29udGV4dG8gZGUgbGEgbm90YTpcXG4ke2NvbnRleHRUZXh0fWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbiA9IFt7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzeXN0ZW1Db250ZW50IH1dO1xuICAgICAgICAgICAgaWYgKHRyaW1tZWQgPT09ICcvbmV3Jykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1N0YXJ0ZWQgbmV3IGNvbnZlcnNhdGlvbicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBcHBlbmQgdXNlciBtZXNzYWdlIHRvIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uLnB1c2goeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHVzZXJNZXNzYWdlIH0pO1xuXHRcdC8vIERlYnVnIHBheWxvYWQ6IGZ1bGwgY29udmVyc2F0aW9uXG5cdFx0Y29uc29sZS5sb2coXCIqKioqQ2hhdFZpZXcuc2VuZE1lc3NhZ2U6IHBheWxvYWQ6XCIsIHRoaXMuY29udmVyc2F0aW9uKTtcblx0XHQvLyBSZXF1ZXN0IHJlc3BvbnNlIGZyb20gR1BUIHdpdGggZnVsbCBjb252ZXJzYXRpb25cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmdwdFNlcnZpY2UuZmV0Y2hSZXNwb25zZSh0aGlzLmNvbnZlcnNhdGlvbik7XG5cdFx0Ly8gQXBwZW5kIGFzc2lzdGFudCByZXNwb25zZSB0byBjb252ZXJzYXRpb24gaGlzdG9yeVxuXHRcdHRoaXMuY29udmVyc2F0aW9uLnB1c2goeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogcmVzcG9uc2UgfSk7XG5cdFxuXHRcdC8vIFJlZW1wbGF6YXIgZWwgc3Bpbm5lciBwb3IgbGEgcmVzcHVlc3RhIHJlbmRlcml6YWRhXG5cdFx0c3Bpbm5lckNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdGNvbnN0IG1hcmtkb3duQ29udGFpbmVyID0gc3Bpbm5lckNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0YXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihyZXNwb25zZSwgbWFya2Rvd25Db250YWluZXIsICcnLCB0aGlzKTtcblx0XG5cdFx0Ly8gQm90XHUwMEYzbiBwYXJhIGluc2VydGFyIGxhIHJlc3B1ZXN0YSBlbiBlbCBlZGl0b3Jcblx0XHRjb25zdCB0cmFuc2ZlckJ1dHRvbiA9IHNwaW5uZXJDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAndHJhbnNmZXItYnV0dG9uJyB9KTtcblx0XHR0cmFuc2ZlckJ1dHRvbi5pbm5lckhUTUwgPSBgXG5cdFx0XHQ8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuXHRcdFx0XHRzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuXHRcdFx0XHQ8cmVjdCB4PVwiOVwiIHk9XCI5XCIgd2lkdGg9XCIxM1wiIGhlaWdodD1cIjEzXCIgcng9XCIyXCIgcnk9XCIyXCI+PC9yZWN0PlxuXHRcdFx0XHQ8cGF0aCBkPVwiTTUgMTVINGEyIDIgMCAwIDEtMi0yVjRhMiAyIDAgMCAxIDItMmg5YTIgMiAwIDAgMSAyIDJ2MVwiPjwvcGF0aD5cblx0XHRcdDwvc3ZnPlxuXHRcdGA7XG5cdFx0dHJhbnNmZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmluc2VydEluRWRpdG9yKHJlc3BvbnNlKSk7XG5cdH1cblx0XHRcblx0aW5zZXJ0SW5FZGl0b3IodGV4dDogc3RyaW5nKSB7XG5cdFx0Y29uc3QgZWRpdG9yID0gdGhpcy5wbHVnaW4uZ2V0QWN0aXZlTWFya2Rvd25FZGl0b3IoKTtcblx0XHRpZiAoZWRpdG9yKSB7XG5cdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKHRleHQsIGVkaXRvci5nZXRDdXJzb3IoKSk7XG5cdFx0XHRuZXcgTm90aWNlKCdNZW5zYWplIGluc2VydGFkbyBlbiBlbCBlZGl0b3IuJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5ldyBOb3RpY2UoJ05vIHNlIGVuY29udHJcdTAwRjMgdW4gZWRpdG9yIGFjdGl2by4nKTtcblx0XHR9XG5cdH1cbn1cblxuLyoqXG4gKiBQZXN0YVx1MDBGMWEgZGUgY29uZmlndXJhY2lcdTAwRjNuIGRlbCBwbHVnaW4uXG4gKi9cbmNsYXNzIENoYXRTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogQ2hhdFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDaGF0UGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdBUEkgS2V5Jylcblx0XHRcdC5zZXREZXNjKCdJbnRyb2R1Y2UgdHUgQVBJIEtleSBkZSBPcGVuQUknKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignc2stLi4uJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdNb2RlbG8nKVxuXHRcdFx0LnNldERlc2MoJ0VsaWdlIGVsIG1vZGVsbyBkZSBPcGVuQUknKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG5cdFx0XHRcdC5hZGRPcHRpb25zKHsgJ28zJzogJ28zJywgJ280LW1pbmknOiAnbzQtbWluaScsICdncHQtNC4xJzogJ0dQVC00LjEnLCAnY2hhdGdwdC00by1sYXRlc3QnOiAnQ2hhdEdQVCcgfSlcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWwgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHR9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFnSTtBQVFoSSxJQUFNLG1CQUF1QztBQUFBLEVBQzVDLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFDUjtBQUtBLElBQU0sYUFBTixNQUFpQjtBQUFBLEVBR2hCLFlBQVksUUFBb0I7QUFDL0IsU0FBSyxTQUFTO0FBQUEsRUFDZjtBQUFBLEVBRUEsTUFBTSxjQUFjLFVBQWtDO0FBdkJ2RDtBQXdCRSxVQUFNLFNBQVMsS0FBSyxPQUFPLFNBQVM7QUFDcEMsUUFBSSxDQUFDLFFBQVE7QUFDWixVQUFJLHVCQUFPLGlEQUFpRDtBQUM1RCxhQUFPO0FBQUEsSUFDUjtBQUdBLFVBQU0sVUFBVTtBQUFBLE1BQ2YsT0FBTyxLQUFLLE9BQU8sU0FBUztBQUFBLE1BQzVCO0FBQUEsSUFDRDtBQUNBLFlBQVEsSUFBSSwwQ0FBMEMsT0FBTztBQUM3RCxVQUFNLFdBQVcsTUFBTSxNQUFNLDhDQUE4QztBQUFBLE1BQzFFLFFBQVE7QUFBQSxNQUNSLFNBQVM7QUFBQSxRQUNSLGdCQUFnQjtBQUFBLFFBQ2hCLGlCQUFpQixVQUFVO0FBQUEsTUFDNUI7QUFBQSxNQUNBLE1BQU0sS0FBSyxVQUFVLE9BQU87QUFBQSxJQUM3QixDQUFDO0FBRUQsVUFBTSxPQUFPLE1BQU0sU0FBUyxLQUFLO0FBQ2pDLGFBQU8sc0JBQUssWUFBTCxtQkFBZSxPQUFmLG1CQUFtQixZQUFuQixtQkFBNEIsWUFBVztBQUFBLEVBQy9DO0FBQ0Q7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
